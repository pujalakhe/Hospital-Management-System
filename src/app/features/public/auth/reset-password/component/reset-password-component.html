<div class="flex justify-center items-center min-h-screen bg-gray-100 p-4">
  <mat-horizontal-stepper [linear]="true">
    <!-- Step 1: Request OTP -->
    <mat-step [stepControl]="emailForm">
      <form [formGroup]="emailForm" class="flex flex-col gap-4">
        <h2 class="text-xl font-semibold text-center">Request OTP</h2>
        <mat-form-field >
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="Enter your email" />
        </mat-form-field>
        <button
          mat-raised-button
          color="primary"
          (click)="onRequestOtp()"
          [disabled]="emailForm.invalid || ((sendOTPLoading$ | async) === true)"
        >
          <mat-spinner *ngIf="(sendOTPLoading$ | async) === true" diameter="20" class="mr-2"></mat-spinner>
          Send OTP
        </button>
              </form>
    </mat-step>

    <!-- Step 2: Verify OTP & Reset Password -->
    <mat-step [stepControl]="otpForm">
      <form [formGroup]="otpForm" class="flex flex-col gap-4">
        <h2 class="text-xl font-semibold text-center">Enter OTP</h2>
        <mat-form-field >
          <mat-label>OTP</mat-label>
          <input matInput formControlName="otp" maxlength="6" placeholder="Enter 6-digit OTP" />
        </mat-form-field>
      </form>

      <form [formGroup]="passwordForm" class="flex flex-col gap-4 mt-4">
        <mat-form-field >
          <mat-label>New Password</mat-label>
          <input matInput formControlName="newPassword" type="password" />
        </mat-form-field>

        <mat-form-field >
          <mat-label>Confirm Password</mat-label>
          <input matInput formControlName="confirmPassword" type="password" />
        </mat-form-field>

        <button
          mat-raised-button
          color="primary"
          (click)="onResetPassword()"
          [disabled]="passwordForm.invalid || otpForm.invalid || ((resetPasswordLoading$ | async) === true)"
        >
          <mat-spinner *ngIf="(resetPasswordLoading$ | async) === true" diameter="20" class="mr-2"></mat-spinner>
          Reset Password
        </button>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</div>
